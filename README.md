# CodeTutor — обучающее AI‑приложение (RU)

Локальная платформа для изучения программирования с практикой задач, авторизацией и сохранением прогресса.

## Стек
- Backend: Node.js, Express, TypeScript, Mongoose, JWT
- Frontend: React (CRA), TypeScript, React Router, Axios
- БД: MongoDB

## Быстрый старт

1) Установите зависимости
```
# Backend
cd backend
npm install

# Frontend
cd ../frontend
npm install
```

2) Настройте окружение (готово)
- `backend/.env` — порт, строка подключения к MongoDB, JWT, CORS
- `frontend/.env` — адрес API (по умолчанию `http://localhost:5000`)

3) Запустите MongoDB
- Вариант A (Docker):
```
docker run --name code-tutor-mongo -p 27017:27017 -d mongo:6
```
- Вариант B (локально): запустите службу MongoDB так, чтобы был доступен `mongodb://localhost:27017`

4) Запустите приложения
```
# В одном терминале — backend
cd backend
npm run dev

# В другом терминале — frontend
cd ../frontend
npm start
```
- Backend: http://localhost:5000/
- Frontend: http://localhost:3000/

### ИИ‑подсказки (опционально)
- Установите ключ OpenAI: в `backend/.env` задайте `OPENAI_API_KEY` и при необходимости `OPENAI_MODEL` (по умолчанию `gpt-4o-mini`).
- На странице «Практика» появится кнопка «Подсказка ИИ», которая отправляет ваш текущий код и описание задачи на endpoint сервера и возвращает наводящие подсказки без раскрытия полного решения.

## Возможности
- Регистрация и вход: `POST /api/auth/register`, `POST /api/auth/login`
- Прогресс пользователя: `GET/POST /api/progress` (требуется Bearer JWT)
- Фронтенд‑страницы: Домашняя, Уроки, Практика, Профиль, Вход, Регистрация
- Практика: локальный редактор, запуск кода, проверка тестами, синхронизация прогресса с сервером (при входе)
- ИИ‑подсказки: `POST /api/ai/hint` (при наличии `OPENAI_API_KEY`)

## Учебные материалы (уроки)
- Структура данных: `frontend/src/data/lessons.ts`
  - Массив `lessons: { id, title, summary, sections[], nextId? }[]`
  - `sections[]` содержит блоки: заголовок, текст, опционально пример кода
- Страницы:
  - Список: `frontend/src/pages/Lessons.tsx` — маршрут `/lessons`
  - Детали: `frontend/src/pages/LessonDetail.tsx` — маршрут `/lessons/:id`
- Навигация по урокам: кнопки «Назад/Далее» и ссылка «Перейти к практике»

## Локализация
- Интерфейс и сообщения — на русском
- Дополнены задачи: Сумма, Разворот строки, Факториал, Максимум в массиве

## Переменные окружения
`backend/.env` пример:
```
PORT=5000
NODE_ENV=development
MONGODB_URI=mongodb://localhost:27017/code-tutor
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini
JWT_SECRET=dev_super_secret_change_me
JWT_EXPIRES_IN=30d
FRONTEND_URL=http://localhost:3000
```
`frontend/.env`:
```
REACT_APP_API_BASE=http://localhost:5000
```

## API: ИИ‑подсказки
- Endpoint: `POST /api/ai/hint`
- Тело запроса:
```json
{
  "taskId": "sum",
  "description": "Реализуйте функцию sum(a, b)...",
  "code": "function sum(a: number, b: number) { return 0; }\nexport { sum };"
}
```
- Пример curl:
```
curl -X POST http://localhost:5000/api/ai/hint \
  -H "Content-Type: application/json" \
  -d '{"taskId":"sum","description":"Реализуйте функцию sum(a, b)","code":"function sum(a: number, b: number){return 0;} export { sum };"}'
```

## Заметки
- Пакет `openai` пока не используется — позже можно добавить подсказки ИИ к задачам.
- Если backend падает с `ECONNREFUSED 127.0.0.1:27017` — не запущена MongoDB.

## Области применения и функции

- **Самостоятельное обучение**
  - Освоение базового синтаксиса и алгоритмов через уроки и практические задачи.
  - Получение наводящих ИИ‑подсказок без раскрытия полного решения.

- **Подготовка к собеседованиям**
  - Тренировка решения типовых задач (строки, массивы, рекурсия, поиск).
  - Самопроверка и отслеживание прогресса.

- **Учебные курсы и кружки**
  - Домашние задания с автопроверкой.
  - Единое место для теории и практики, адаптированное для начинающих.

- **Внутреннее обучение в компаниях**
  - Быстрый старт для стажёров/джунов с задачами и подсказками.
  - Локальная установка и контроль доступа (через JWT/CORS).

- **Демо ИИ‑функций в образовании**
  - Показывает, как добавлять ИИ‑подсказки в учебные продукты безопасно (через бэкенд).

## Функциональные возможности приложения

- **[Уроки]**
  - Структурированные материалы в rontend/src/data/lessons.ts.
  - Навигация по темам и переход к практике.

- **[Практика задач]**
  - Встроенный редактор кода, запуск и автопроверка.
  - Синхронизация прогресса при входе.

- **[ИИ‑подсказки]**
  - POST /api/ai/hint — наводящие советы на основе описания задачи и текущего кода.
  - Работает через сервер (ackend/src/routes/ai.ts) с ключом OPENAI_API_KEY.
  - Защита от «выдачи решения»: краткие хинты, не полный код.

- **[Аутентификация и профиль]**
  - Регистрация/вход: POST /api/auth/register, POST /api/auth/login (JWT).
  - Страницы «Профиль», «Вход», «Регистрация».

- **[Хранение прогресса]**
  - GET/POST /api/progress — сохранение и загрузка результата задач в MongoDB.

- **[Локальный развёртываемый стек]**
  - Frontend (React) + Backend (Express) + MongoDB.
  - Простая конфигурация через .env, CORS, безопасная прокладка к OpenAI.
